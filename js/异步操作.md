异步的解释，原理
eventloop
早期（回调函数）
promise
async await

## 什么是异步
异步在js中简单来说就是不阻塞后续代码执行，例如一个setTimeout其执行顺序上一定不会阻塞后续代码。而js是一个单线程语言，所以需要引入eventloop概念

## eventLoop
eventLoop的核心概念就是微任务和宏任务的执行顺序，在js代码执行过程中，会以同步代码=>微任务=>宏任务的顺序执行，其中常见的宏任务有(浏览器支持)：
>1. setTimeOut  
>2. setInterval  

微任务有(浏览器支持)：
>1. promise.then  
>2. async await

来看一道面试题加深理解：

```js
foo = async function () {
  console.log('foo');
}
bar = async function () {
  console.log('bar start');
  await (function () {
    console.log('await')
  })()
  console.log('barEnd');
}
console.log('script start');
setTimeout(()=>{
  console.log('setTimeout');
},0)
foo();
bar();
new Promise(resolve =>{
  console.log('Promise');
  resolve(1)
}).then(()=>{
  console.log('PromiseThen');
})
console.log('script end');
```
结果为：
```js
/* script start
foo
bar start
await
Promise
script end
barEnd
PromiseThen
setTimeout */
```
我们来分析一下：  
1. 这段代码会以 同步代码=>微任务池=>宏任务池顺序执行
2. 同步代码有：    
    1. 普通的打印代码
    2. async中，await函数前（包括await函数内容）
    3. promise.then前
3. 微任务有:    
    1. await函数之后
    2. promise.then()内容
4. 宏任务有：  
    1. setTimeout

下面说说需要注意的几个点：  
1. 如果有多个script代码片段，那么将在第一段script微任务执行完成后执行第二段script,待代码片段和其自身微任务执行完后再执行宏任务池
2. 将await函数结果赋值给变量的操作也会被放到微任务队列中执行

## promise


